#First is set to default
#
#	#type_key
#	test_type = {
#		#on_create, run everytime the federation type has been set
#		on_create = {}
#		#potential
#		potential = {}
#		#allowed
#		allow = {}
#		#levels
#		levels = {
#			#test level key
#			test_level = {
#			#perks for level
#				perks = {
#					test_perk_1
#					test_perk_2
#				}
#			}
#		}
#	}

@xp_to_level_2 = 1200
@xp_to_level_3 = 2400
@xp_to_level_4 = 4800
@xp_to_level_5 = 9600

vf_ef_federation = {
	base_intel = 10
	icon = "GFX_empire_federation"
	potential = {
		host_has_dlc = Federations
	}
	allow = {
		OR = {
			is_authoritarian = yes
			is_gestalt = yes
			has_civic = civic_feudal_realm
		}
	}
	levels = {
		level_1 = { # Starting rank
			experience = @xp_to_level_2 # Experience until next rank
			perks = {
				empire_federation_passive
				cohesion_empire_join_1
				emperor_diplo_weight_steal_1
			}
		}

		level_2 = {
			experience = @xp_to_level_3
			perks = {
				empire_research_boost_1
				emperor_empire_cb_1
				empire_fleet_speed_1
				emperor_diplo_weight_steal_2
			}
		}

		level_3 = {
			experience = @xp_to_level_4
			perks = {
				extra_imperial_envoy_1
				empire_ship_gain
				vf_ef_job_output_1
				emperor_diplo_weight_steal_3
			}
		}

		level_4 = {
			experience = @xp_to_level_5
			perks = {
				imperial_influence_1
				empire_fleet_size_1
				empire_trade_value_1
				emperor_diplo_weight_steal_4
			}
		}

		level_5 = {
			perks = {
				damage_crisis_1
				emperor_unity_1
				emperor_megastructure_1
				emperor_diplo_weight_steal_5
			}
		}
	}
	on_create = {
		remove_federation_flag = enable_federation_cooldowns
		set_federation_law = centralization_minimal_empire
		set_federation_law = succession_type_strongest_empire
		set_federation_law = succession_power_diplomatic_weight_empire
		set_federation_law = succession_term_status_change_empire
		set_federation_law = fleet_contribution_low_empire
		set_federation_law = federation_build_fleets_only_leader_empire
		set_federation_law = allow_subjects_to_join_yes_empire
		set_federation_law = vote_weight_diplomatic_empire
		set_federation_law = declare_war_majority_vote_empire
		set_federation_law = invite_members_president_vote_empire
		set_federation_law = kick_members_president_vote_empire
		set_federation_law = free_migration_no_empire
		set_federation_law = treaties_separate_no_empire
		set_federation_flag = enable_federation_cooldowns
		set_federation_flag = vf_law_changes_enabled
	}
	ai_weight = {
		base = -500
		modifier = {
			desc = federation_acceptance_empire_other
			add = -1000
			from = {
				NOR = {
					# Vassals Expanded and Reworked Vanilla Subjects
					is_subject_type = vassal
					is_subject_type = vervassal
					is_subject_type = tributary
					is_subject_type = vertributary
					is_subject_type = subsidiary
					is_subject_type = versubsidiary
					is_subject_type = protectorate
					# Exalted Domination
					is_subject_type = exalted_subject_warden
					is_subject_type = exalted_subject_automated_assembler
					is_subject_type = exalted_subject_remote_archive
					is_subject_type = exalted_subject_dominion
					is_subject_type = exalted_subject_pet
					# Zenith of Fallen Empires
					is_subject_type = dominion
					is_subject_type = satellite
					is_subject_type = signatory
					is_subject_type = thrall
					is_subject_type = fe_clan_member
					is_subject_type = fe_demilitarized_state
					is_subject_type = fe_puppet_state
					is_subject_type = fe_union_state
					is_subject_type = fe_satrapy
					is_subject_type = fe_symbiote
					is_subject_type = fe_auxiliary
					is_subject_type = banished_ascendancy
					# Vassals Expanded and Reworked Normal Subjects
					is_subject_type = verappendage
					is_subject_type = verautonomous
					is_subject_type = verbeneficiary
					is_subject_type = verdisciple
					is_subject_type = verfoederatus
					is_subject_type = verjrpartner
					is_subject_type = verpuppet
					is_subject_type = verserf
					is_subject_type = versister
					is_subject_type = verorganic
					is_subject_type = verparallel
					is_subject_type = verblood
					# Vassals Expanded and Reworked Corporate Subjects
					is_subject_type = verdevotee
					is_subject_type = verkobun
					is_subject_type = versupplier
					is_subject_type = verworshipper
					is_subject_type = verdebtor
					is_subject_type = versubscriber
					is_subject_type = verarmsdealer
					is_subject_type = versubcontractor
					is_subject_type = verdependency
					# Decentralized Empires 2.7
					is_subject_type = member_state
					# z Expanded Traits, Civics, Pops, and More
					is_subject_type = duchy
					# Government Variety Pack
					is_subject_type = lrsk_gvp_vassal_foundry
					is_subject_type = lrsk_gvp_vassal_market
					is_subject_type = lrsk_gvp_vassal_trophy
					is_subject_type = lrsk_gvp_vassal_prospector
				}		
			}
		}

		modifier = {
			desc = federation_acceptance_empire
			add = 10000
			from = {
				OR = {
					# Vassals Expanded and Reworked Vanilla Subjects
					is_subject_type = vassal
					is_subject_type = vervassal
					is_subject_type = tributary
					is_subject_type = vertributary
					is_subject_type = subsidiary
					is_subject_type = versubsidiary
					is_subject_type = protectorate
					# Exalted Domination
					is_subject_type = exalted_subject_warden
					is_subject_type = exalted_subject_automated_assembler
					is_subject_type = exalted_subject_remote_archive
					is_subject_type = exalted_subject_dominion
					is_subject_type = exalted_subject_pet
					# Zenith of Fallen Empires
					is_subject_type = dominion
					is_subject_type = satellite
					is_subject_type = signatory
					is_subject_type = thrall
					is_subject_type = fe_clan_member
					is_subject_type = fe_demilitarized_state
					is_subject_type = fe_puppet_state
					is_subject_type = fe_union_state
					is_subject_type = fe_satrapy
					is_subject_type = fe_symbiote
					is_subject_type = fe_auxiliary
					is_subject_type = banished_ascendancy
					# Vassals Expanded and Reworked Normal Subjects
					is_subject_type = verappendage
					is_subject_type = verautonomous
					is_subject_type = verbeneficiary
					is_subject_type = verdisciple
					is_subject_type = verfoederatus
					is_subject_type = verjrpartner
					is_subject_type = verpuppet
					is_subject_type = verserf
					is_subject_type = versister
					is_subject_type = verorganic
					is_subject_type = verparallel
					is_subject_type = verblood
					# Vassals Expanded and Reworked Corporate Subjects
					is_subject_type = verdevotee
					is_subject_type = verkobun
					is_subject_type = versupplier
					is_subject_type = verworshipper
					is_subject_type = verdebtor
					is_subject_type = versubscriber
					is_subject_type = verarmsdealer
					is_subject_type = versubcontractor
					is_subject_type = verdependency
					# Decentralized Empires 2.7
					is_subject_type = member_state
					# z Expanded Traits, Civics, Pops, and More
					is_subject_type = duchy
					# Government Variety Pack
					is_subject_type = lrsk_gvp_vassal_foundry
					is_subject_type = lrsk_gvp_vassal_market
					is_subject_type = lrsk_gvp_vassal_trophy
					is_subject_type = lrsk_gvp_vassal_prospector
				}		
			}
		}
	}
}